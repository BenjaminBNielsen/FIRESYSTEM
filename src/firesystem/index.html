<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Fire System</title>



    <!-- Bootstrap -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/css/bootstrap.min.css">

    <link rel="stylesheet" href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.11.2/themes/smoothness/jquery-ui.css" />

    <link rel="stylesheet" href="world.css">

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  </head>
  <body>
  
    <div class="lblImage">

      <div id="sensor1" style="position: absolute; top: 400px; left: 200px; color: red; background-color: white; font-size: 30px; ">
        30
      </div>

      <div id="sensor2" style="position: absolute; top: 200px; left: 700px; color: red; background-color: white; font-size: 30px; ">
        30
      </div> 

      <div id="sensor3" style="position: absolute; top: 300px; left: 300px; color: red; background-color: white; font-size: 30px; ">
        30
      </div>      

      <div id="sensor4" style="position: absolute; top: 500px; left: 200px; color: red; background-color: white; font-size: 30px; ">
        30
      </div> 

      <div id="sensor5" style="position: absolute; top: 500px; left: 400px; color: red; background-color: white; font-size: 30px; ">
        5555
      </div> 


      <div id="sensor6" style="position: absolute; top: 400px; left: 400px; color: red; background-color: white; font-size: 30px; ">
        30
      </div> 

      <div id="sensor7" style="position: absolute; top: 300px; left: 400px; color: red; background-color: white; font-size: 30px; ">
        30
      </div>

      <div id="sensor10" style="position: absolute; top: 450px; left: 650px; color: red; background-color: white; font-size: 30px; ">
        30
      </div>              

      <div id="sensor11" style="position: absolute; top: 300px; left: 500px; color: red; background-color: white; font-size: 30px; ">
        30
      </div> 

      <div id="sensor13" style="position: absolute; top: 450px; left: 500px; color: red; background-color: white; font-size: 30px; ">
        30
      </div> 


      <img src="http://npic-hmit2009.org/wp-content/uploads/2015/03/click-the-links-here-for-detailed-floor-plans-new-farmhouse-93750.jpg" style="width:1000px; height:800px;">

      

    </div>


    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>

    <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.11.2/jquery-ui.min.js"></script>

    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/js/bootstrap.min.js"></script>


    <script>

    setInterval("getTemperatures()", 10000);

    function getTemperatures(){
      // Connect to the server
      // Get all the tempratures at once
      // sJSON - convert it into an object to extract the data
      // JQUERY uses $
      // JAVASCRIPT doesn't understand $
      $.get("http://iqvsiq.com/temperatures.php",function(sData){
        // console.log(sData);
        // sData = '[{"name":"sensor-1","temperature":39}]';
        console.log(sData);
        var oTemperatures = JSON.parse(sData);
        var iNumberOfRoomsInFire = 0;
        for(var i = 0; i <= 12; i++){
          var sTestTemperature = oTemperatures[i].temperature;
          var j = i + 1;
          console.log("Temperature for sensor "+j+" is : " + sTestTemperature);

          $("#sensor"+j).text(sTestTemperature);

          if(sTestTemperature > 90){
            iNumberOfRoomsInFire += 1;
          }

        }


        if(iNumberOfRoomsInFire >= 2){
          //alert("FIREEEEEEEEEEEEEE");
          
          // for(var i = 0; i <= 12; i++){
          //   var sMobile = oTemperatures[i].mobile;
          //   $.get("http://ecuanota.com/bridge-send-sms-to-mobile.php?sMobileNumber="+sMobile+"&sMessage=Hurry UP",function(sData){
          //   });          
          // }          
          

        }


        localStorage.data = sData;

      });  
    }

    getTemperatures();


    </script>

  </body>
</html>



















